<?xml version="1.0" encoding="utf-8"?>
<!-- Fire TV Screensaver Timeout Enforcer - Main Window -->
<Window
    x:Class="FireStickScreenSaverEnforcer.App.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FireStickScreenSaverEnforcer.App"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Fire TV Screensaver Timeout Enforcer">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>



    <Grid Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Settings Section -->
        <StackPanel Grid.Row="0" Spacing="16">
            <TextBlock Text="Fire TV Screensaver Timeout Enforcer" 
                       Style="{StaticResource TitleTextBlockStyle}" 
                       Margin="0,0,0,8"/>
            
            <TextBlock Text="Keeps your Fire TV screensaver timeout at 1 minute (60 seconds) by periodically checking and correcting the setting via ADB."
                       TextWrapping="Wrap"
                       Opacity="0.7"
                       Margin="0,0,0,16"/>


            <!-- Fire TV IP Address and Port -->
            <StackPanel Spacing="4">
                <TextBlock Text="Fire TV Connection"/>
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBox x:Name="IpAddressTextBox" 
                             Header="IP Address"
                             PlaceholderText="192.168.1.50"
                             Width="180"
                             HorizontalAlignment="Left"/>
                    <TextBox x:Name="PortTextBox" 
                             Header="Port"
                             PlaceholderText="5555"
                             Width="80"
                             HorizontalAlignment="Left"/>
                </StackPanel>
            </StackPanel>

            <!-- Interval -->
            <StackPanel Spacing="4">
                <TextBlock Text="Check Interval (seconds)"/>
                <NumberBox x:Name="IntervalNumberBox"
                           Minimum="10"
                           Maximum="600"
                           Value="30"
                           SpinButtonPlacementMode="Compact"
                           Width="180"
                           HorizontalAlignment="Left"/>
            </StackPanel>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="1" 
                    Orientation="Horizontal" 
                    Spacing="12" 
                    Margin="0,24,0,16">
            <Button x:Name="StartButton" 
                    Content="▶ Start Enforcing" 
                    Style="{StaticResource AccentButtonStyle}"
                    Click="StartButton_Click"
                    Width="150"/>
            <Button x:Name="StopButton" 
                    Content="⏹ Stop" 
                    Click="StopButton_Click"
                    IsEnabled="False"
                    Width="100"/>
        </StackPanel>

        <!-- Status -->
        <Border Grid.Row="2" 
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="4"
                Padding="12"
                Margin="0,0,0,16">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBlock Text="Status:" FontWeight="SemiBold"/>
                <TextBlock x:Name="StatusTextBlock" 
                           Text="Ready. Configure settings and click Start."
                           TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <!-- Log -->
        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <TextBlock Grid.Row="0" 
                       Text="Activity Log" 
                       FontWeight="SemiBold" 
                       Margin="0,0,0,8"/>
            
            <ScrollViewer Grid.Row="1" 
                          x:Name="LogScrollViewer"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Auto">
                <TextBox x:Name="LogTextBox"
                         IsReadOnly="True"
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         FontFamily="Consolas"
                         FontSize="12"
                         MinHeight="200"
                         BorderThickness="1"
                         BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"/>
            </ScrollViewer>
        </Grid>

        <!-- Footer -->
        <StackPanel Grid.Row="4" 
                    Orientation="Horizontal" 
                    Margin="0,16,0,0"
                    Spacing="8">
            <Button x:Name="ClearLogButton" 
                    Content="Clear Log" 
                    Click="ClearLogButton_Click"/>
            <TextBlock Text="Target timeout: 60000ms (1 minute)" 
                       VerticalAlignment="Center"
                       Opacity="0.6"
                       Margin="16,0,0,0"/>
        </StackPanel>
    </Grid>
</Window>
